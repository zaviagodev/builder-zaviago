var Lightbox=function(){"use strict";const e=new class{createElement(e){return document.createElement(e)}appendChild(e,t){e&&e.appendChild(t)}appendHtml(e,t){e&&e.insertAdjacentHTML("beforeend",t)}addEventListener(e,t,o){e&&e.addEventListener(t,o)}addClass(e,t){e&&(this.hasClass(e,t)||(0===e.classList.length?e.className=t:e.className=e.className+" "+t,e.className=e.className.replace(/  +/g," ")))}removeClass(e,t){if(e&&e.classList.length>0){let o,l,i,r,a=t.split(" ");for(o=0,i=a.length;o<i;++o){if(!a[o])continue;let t=a[o],i="",s=e.className.split(" ");for(l=0,r=s.length;l<r;++l)s[l]&&s[l]!==t&&(i+=s[l]+" ");e.className=i.trim()}""===e.className&&e.removeAttribute("class")}}hasClass(e,t){if(!e)return!1;try{let o=e.getAttribute("class");return new RegExp("\\b"+t+"\\b").test(o)}catch(e){}}moveAfter(e,t){t.parentNode.insertBefore(e,t),t.parentNode.insertBefore(t,t.previousElementSibling)}elementChildren(e){const t=e.childNodes;let o=[],l=t.length;for(;l--;)1===t[l].nodeType&&o.unshift(t[l]);return o}parentsHasClass(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if(this.hasClass(e,t))return!0;e=e.parentNode}}parentsHasId(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if(e.id===t)return!0;e=e.parentNode}}parentsHasTag(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if(e.tagName.toLowerCase()===t.toLowerCase())return!0;e=e.parentNode}}parentsHasAttribute(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;try{if(e.hasAttribute(t))return!0}catch(e){}e=e.parentNode}}parentsHasElement(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if(!(e=e.parentNode))return!1;if(!e.tagName)return!1;if(e.tagName.toLowerCase()===t)return!0}}removeClasses(e,t){for(let o=0;o<e.length;o++)e[o].classList.remove(t)}removeAttributes(e,t){for(let o=0;o<e.length;o++)e[o].removeAttribute(t)}removeElements(e){Array.prototype.forEach.call(e,(e=>{e.parentNode.removeChild(e)}))}getStyle(e,t){return window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))]}};class t{constructor(t={}){this.opts=Object.assign(this,{arrow:!0},t),this.arrow=this.opts.arrow;let o=document.querySelector("#_cbhtml");if(o||(o=e.createElement("div"),o.id="_cbhtml",o.className="is-ui",e.appendChild(document.body,o)),this.builderStuff=o,!this.builderStuff.querySelector("#_lightbox")){let e='\n\n                <div class="is-lightbox lightbox-all" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                    <button class="cmd-lightbox-close" title="Close" type="button">\n                        <svg><use xlink:href="#_svgLightboxClose"></use></svg>\n                    </button>\n\n                    <div class="lightbox-content" style="width:100%;">\n                    </div>\n\n                    <button class="cmd-lightbox-prev" title="Previous" type="button" style="top:50%;left:3px;">\n                        <svg><use xlink:href="#_svgLightboxLeft"></use></svg>\n                    </button>\n                    <button class="cmd-lightbox-next" title="Next" type="button" style="top:50%;left:auto;right:3px">\n                        <svg><use xlink:href="#_svgLightboxRight"></use></svg>\n                    </button>\n                </div>\n\n                <svg width="0" height="0" style="position:absolute;display:none;">\n                    <defs>\n                        <symbol viewBox="0 0 24 24" id="_svgLightboxClose" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>\n                        </symbol>\n                        <symbol viewBox="0 0 24 24" id="_svgLightboxLeft" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                            <polyline points="15 6 9 12 15 18"></polyline>\n                        </symbol>\n                        <symbol viewBox="0 0 24 24" id="_svgLightboxRight" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                            <polyline points="9 6 15 12 9 18"></polyline>\n                        </symbol>\n                    </defs>\n                </svg>\n            ';this.builderStuff.insertAdjacentHTML("afterbegin",e)}const l=()=>{let t=document.querySelector(".is-lightbox.lightbox-all.active");e.removeClass(t,"active");t.querySelector(".cmd-lightbox-close").style.opacity=0,document.body.style.overflowY="",setTimeout((()=>{let e=t.querySelector("iframe");e&&e.setAttribute("src","about:blank");const o=t.querySelector(".lightbox-content");t.querySelector("video")&&(o.innerHTML=""),t.style.display="",this.elmFocus&&this.elmFocus.focus()}),300)},i=()=>{const e=this.getList();let t=document.querySelector(".is-lightbox.lightbox-all.active"),o=t.getAttribute("data-url");e.forEach((l=>{if(o===l.url){let o;o=(e.indexOf(l)-1)%e.length,-1===o&&(o=e.length-1),this.openThen(e[o]);t.querySelector(".cmd-lightbox-prev").focus()}}))},r=()=>{const e=this.getList();let t=document.querySelector(".is-lightbox.lightbox-all.active"),o=t.getAttribute("data-url");e.forEach((l=>{if(o===l.url){const o=(e.indexOf(l)+1)%e.length;this.openThen(e[o]);t.querySelector(".cmd-lightbox-next").focus()}}))},a=e=>{27===e.keyCode&&(l(),e.preventDefault()),this.arrow&&(37!==e.which||e.shiftKey||i(),39!==e.which||e.shiftKey||r())};this.builderStuff.querySelectorAll("div.is-lightbox.lightbox-all").forEach((t=>{t.addEventListener("keydown",a),t.addEventListener("click",(t=>{e.parentsHasClass(t.target,"lightbox-content")||(l(),t.preventDefault())}));const o=t.querySelector(".cmd-lightbox-close");o.addEventListener("click",(e=>{l(),e.preventDefault(),e.stopImmediatePropagation()})),o.addEventListener("keydown",(e=>{13!==e.keyCode&&32!==e.keyCode||(l(),e.preventDefault())}));const s=t.querySelector(".cmd-lightbox-prev");s&&s.addEventListener("click",(e=>{i(),e.preventDefault(),e.stopImmediatePropagation()})),s&&s.addEventListener("keydown",(e=>{13!==e.keyCode&&32!==e.keyCode||(i(),e.preventDefault())}));const n=t.querySelector(".cmd-lightbox-next");n&&n.addEventListener("click",(e=>{r(),e.preventDefault(),e.stopImmediatePropagation()})),n&&n.addEventListener("keydown",(e=>{13!==e.keyCode&&32!==e.keyCode||(r(),e.preventDefault())}))}))}init(){let e=document.querySelectorAll(".block-click,.button-click,.is-lightbox");try{this.parent&&(e=this.parent.querySelectorAll(".block-click,.button-click,.is-lightbox"))}catch(e){}e.forEach((e=>{e.addEventListener("click",(t=>{let o,l;if("a"===e.tagName.toLowerCase())o=e.getAttribute("href"),l=o.split(".").pop().split("?")[0].split("#")[0];else if(e.getAttribute("data-modal-url"))o=e.getAttribute("data-modal-url"),l=o.split(".").pop().split("?")[0].split("#")[0];else if(!(e.getAttribute("data-modal-image")||e.getAttribute("data-modal-video")||e.getAttribute("data-modal-externalvideo")))return;let i=e.getAttribute("data-modal-theme");i||(i="light");const r=e.getAttribute("data-modal-color");"jpg"===l||"jpeg"===l||"png"===l||"gif"===l||"webm"===l?this.openImage(o,i,r):"mp4"===l?this.openVideo(o,"dark",r):-1!==o.toLowerCase().indexOf("youtube.com")||-1!==o.toLowerCase().indexOf("youtube-nocookie.com")||-1!==o.toLowerCase().indexOf("vimeo.com")?this.openExternalVideo(o,"dark",r):e.getAttribute("data-modal-image")?(o=e.getAttribute("data-modal-image"),this.openImage(o,i,r)):e.getAttribute("data-modal-video")?(o=e.getAttribute("data-modal-video"),this.openVideo(o,"dark",r)):e.getAttribute("data-modal-externalvideo")?(o=e.getAttribute("data-modal-externalvideo"),this.openExternalVideo(o,"dark",r)):window.location.href=o,t.preventDefault()}))}))}openThen(e){"image"===e.type&&(this.programmatically=!0,this.openImage(e.url,e.theme,e.color)),"video"===e.type&&(this.programmatically=!0,this.openVideo(e.url,e.theme,e.color)),"externalvideo"===e.type&&(this.programmatically=!0,this.openExternalVideo(e.url,e.theme,e.color))}openImage(t,o,l){if(document.activeElement&&(this.elmFocus=document.activeElement,!this.programmatically)){const e=document.activeElement.closest("[data-gallery]");this.parent=e}let i=this.builderStuff.querySelector("div.is-lightbox.lightbox-all");try{window.frameElement&&!i&&(i=parent.document.querySelector(".is-lightbox.lightbox-all"))}catch(e){}if(!this.programmatically){const t=this.getList(),o=i.querySelector(".cmd-lightbox-prev");o.style.opacity=0;const l=i.querySelector(".cmd-lightbox-next");l.style.opacity=0,o.style.display="none",l.style.display="none",t.length>1&&this.arrow&&(o.style.display="flex",l.style.display="flex",setTimeout((()=>{i.querySelector(".cmd-lightbox-prev").style.opacity=1;i.querySelector(".cmd-lightbox-next").style.opacity=1}),500));const r=i.querySelector(".cmd-lightbox-close");r.style.opacity=0,setTimeout((()=>{e.addClass(i,"active"),setTimeout((()=>{r.style.opacity=1}),450)}),10)}i.setAttribute("data-url",t),i.classList.remove("lightbox-video"),i.classList.remove("lightbox-externalvideo"),i.classList.add("lightbox-image"),l&&(i.style.backgroundColor=l);const r=i.querySelector(".lightbox-content");this.programmatically?(r.style.transition="all 200ms ease",r.style.opacity="0",setTimeout((()=>{r.innerHTML=`<img src="${t}">`,r.style.opacity="1"}),200)):r.innerHTML=`<img src="${t}">`,"light"===o?(e.addClass(i,"light"),e.removeClass(i,"dark")):(e.addClass(i,"dark"),e.removeClass(i,"light")),i.style.display="flex",window.frameElement||(document.body.style.overflowY="hidden"),i.focus({preventScroll:!0}),this.programmatically=!1}openVideo(t,o,l){if(document.activeElement&&(this.elmFocus=document.activeElement,!this.programmatically)){const e=document.activeElement.closest("[data-gallery]");this.parent=e}let i=document.querySelector(".is-lightbox.lightbox-all");try{window.frameElement&&!i&&(i=parent.document.querySelector(".is-lightbox.lightbox-all"))}catch(e){}if(!this.programmatically){const t=this.getList(),o=i.querySelector(".cmd-lightbox-prev");o.style.opacity=0;const l=i.querySelector(".cmd-lightbox-next");l.style.opacity=0,o.style.display="none",l.style.display="none",t.length>1&&this.arrow&&(o.style.display="flex",l.style.display="flex",setTimeout((()=>{i.querySelector(".cmd-lightbox-prev").style.opacity=1;i.querySelector(".cmd-lightbox-next").style.opacity=1}),450));const r=i.querySelector(".cmd-lightbox-close");r.style.opacity=0,setTimeout((()=>{e.addClass(i,"active"),setTimeout((()=>{r.style.opacity=1}),450)}),10)}i.setAttribute("data-url",t),i.classList.add("lightbox-video"),i.classList.remove("lightbox-externalvideo"),i.classList.remove("lightbox-image"),l&&(i.style.backgroundColor=l);const r=i.querySelector(".lightbox-content");this.programmatically?(r.style.transition="all 200ms ease",r.style.opacity="0",setTimeout((()=>{r.innerHTML=`<video playsinline controls autoplay width="100%">\n                    <source src="${t}" type="video/mp4">\n                </video>`,r.style.opacity="1"}),200)):r.innerHTML=`<video playsinline controls autoplay width="100%">\n                <source src="${t}" type="video/mp4">\n            </video>`,"light"===o?(e.addClass(i,"light"),e.removeClass(i,"dark")):(e.addClass(i,"dark"),e.removeClass(i,"light")),i.style.display="flex",window.frameElement||(document.body.style.overflowY="hidden"),i.focus({preventScroll:!0}),this.programmatically=!1}openExternalVideo(t,o,l){if(document.activeElement&&(this.elmFocus=document.activeElement,!this.programmatically)){const e=document.activeElement.closest("[data-gallery]");this.parent=e}let i=document.querySelector(".is-lightbox.lightbox-all");try{window.frameElement&&!i&&(i=parent.document.querySelector(".is-lightbox.lightbox-all"))}catch(e){}if(!this.programmatically){const t=this.getList(),o=i.querySelector(".cmd-lightbox-prev");o.style.opacity=0;const l=i.querySelector(".cmd-lightbox-next");l.style.opacity=0,o.style.display="none",l.style.display="none",t.length>1&&this.arrow&&(o.style.display="flex",l.style.display="flex",setTimeout((()=>{i.querySelector(".cmd-lightbox-prev").style.opacity=1;i.querySelector(".cmd-lightbox-next").style.opacity=1}),500));const r=i.querySelector(".cmd-lightbox-close");r.style.opacity=0,setTimeout((()=>{e.addClass(i,"active"),setTimeout((()=>{r.style.opacity=1}),450)}),10)}i.setAttribute("data-url",t),i.classList.remove("lightbox-video"),i.classList.add("lightbox-externalvideo"),i.classList.remove("lightbox-image"),l&&(i.style.backgroundColor=l),"light"===o?(e.addClass(i,"light"),e.removeClass(i,"dark")):(e.addClass(i,"dark"),e.removeClass(i,"light"));const r=i.querySelector(".lightbox-content");if(this.programmatically)r.style.transition="all 200ms ease",r.style.opacity="0",setTimeout((()=>{r.innerHTML='<div class="embed-responsive embed-responsive-16by9" style="width:100%;">\n                    <iframe width="560" height="315" src="about:blank" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n                </div>',r.style.opacity="1";const e=i.querySelector("iframe");""!==(t=this.getIframeVideoUrl(t))&&e.setAttribute("src",t)}),200);else{r.innerHTML='<div class="embed-responsive embed-responsive-16by9" style="width:100%;">\n                <iframe width="560" height="315" src="about:blank" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n            </div>';const e=i.querySelector("iframe");""!==(t=this.getIframeVideoUrl(t))&&e.setAttribute("src",t)}i.style.display="flex",window.frameElement||(document.body.style.overflowY="hidden"),i.focus({preventScroll:!0}),this.programmatically=!1}getIframeVideoUrl(e){let t=e.match(/^.*(?:https?:)?(?:\/\/)?(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/\S*?[^\w\s-])((?!videoseries)[\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/),o=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/)|(video\/))?([0-9]+)\/?/.exec(e);if(null===t&&null===o||-1!==e.indexOf("player.vimeo.com")||-1!==e.indexOf("youtube.com/embed/")||-1!==e.indexOf("youtube-nocookie.com/embed/"))-1!==e.indexOf("youtube-nocookie.com/embed/")&&-1===e.indexOf("?")&&(e+="?rel=0&autoplay=1&color=white");else{if(null!==t){e="https://www.youtube-nocookie.com/embed/"+t[1]+"?rel=0&autoplay=1&color=white"}if(null!==o&&o.length>=7){e="https://player.vimeo.com/video/"+o[6]}}return e}getList(){const e=[];let t=document.querySelectorAll(".block-click,.button-click,.is-lightbox");try{this.parent&&(t=this.parent.querySelectorAll(".block-click,.button-click,.is-lightbox"))}catch(e){}return t.forEach((t=>{if(!this.parent&&t.closest("[data-gallery"))return;let o,l;"a"===t.tagName.toLowerCase()?(o=t.getAttribute("href"),l=o.split(".").pop().split("?")[0].split("#")[0]):t.getAttribute("data-modal-url")&&(o=t.getAttribute("data-modal-url"),l=o.split(".").pop().split("?")[0].split("#")[0]);let i=t.getAttribute("data-modal-theme");i||(i="light");const r=t.getAttribute("data-modal-color");o&&("jpg"===l||"jpeg"===l||"png"===l||"gif"===l||"webm"===l?e.push({type:"image",url:o,theme:i,color:r}):"mp4"===l?e.push({type:"video",url:o,theme:"dark",color:r}):-1===o.toLowerCase().indexOf("youtube.com")&&-1===o.toLowerCase().indexOf("youtube-nocookie.com")&&-1===o.toLowerCase().indexOf("vimeo.com")||e.push({type:"externalvideo",url:o,theme:"dark",color:r})),t.getAttribute("data-modal-image")?(o=t.getAttribute("data-modal-image"),e.push({type:"image",url:o,theme:i,color:r})):t.getAttribute("data-modal-video")?(o=t.getAttribute("data-modal-video"),e.push({type:"video",url:o,theme:"dark",color:r})):t.getAttribute("data-modal-externalvideo")&&(o=t.getAttribute("data-modal-externalvideo"),e.push({type:"externalvideo",url:o,theme:"dark",color:r}))})),e}}return window.lightbox=new t,t}();
